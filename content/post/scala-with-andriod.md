+++
title = "Scala with andriod"
date = 2010-12-21T21:44:00Z
updated = 2018-02-04T02:07:53Z
tags = ["Scala", "Android"]
blogimport = true 
[author]
	name = "TerryH"
	uri = "https://www.blogger.com/profile/00198432946574471177"
+++

最近覺得最好玩的東西，就是用 Scala 來寫 android 的程式了<br /><br />對 Scala 陌生的人可以先看看，<a href="http://bone.twbbs.org.tw/blog/">墳墓大</a> 的簡報<br /><br /><iframe src="//www.slideshare.net/slideshow/embed_code/key/U1n74dEv73HdQ" width="595" height="485" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe> <div style="margin-bottom:5px"><strong> <a href="//www.slideshare.net/brianhsu/programming-android-application-in-scala" title="Programming Android Application in Scala." target="_blank">Programming Android Application in Scala.</a> </strong> from <strong><a href="https://www.slideshare.net/brianhsu" target="_blank">Brian Hsu</a></strong> </div><br /><br />簡報很精彩，裡面我覺得重點就是第 8 頁，用 Java 來開發一點都沒有興奮的感覺，小宇宙燃燒不起來，學 scala 好玩的地方，就是可以慢慢地嘗試 function programing 的方法，又可以玩 android 的 application，算是蠻有趣的，比起 <a href="http://www.haskell.org/haskellwiki/Haskell">Haskell</a> 算是軟很多，不會一下子腦筋轉不過去<br /><br /><br />在 andriod 上的設定也是相當的簡單，下面是一起搭配 sbt 來作 build 的方式<br /><br />步驟<br /><br />1. 下載安裝 scala <a href="http://www.scala-lang.org/downloads">http://www.scala-lang.org/downloads</a><br /><br />2. 下載安裝 android sdk <a href="http://developer.android.com/sdk/index.html">http://developer.android.com/sdk/index.html</a><br /><br />3. 安裝 sbt <a href="http://code.google.com/p/simple-build-tool/wiki/Setup">http://code.google.com/p/simple-build-tool/wiki/Setup</a><br /><br />4. git clone <a href="https://github.com/steve918/android-plugin">https://github.com/steve918/android-plugin.git</a><br /><br />5. cd android-plugin<br /><br />6. script/create_project foo com.example.android # ＃這樣就建立了一個 foo 的 andorid 專案資料夾<br /><br />7. cd foo<br /><br />8. export ANDROID_SDK_HOME=path/to/android_sdk # 要改成你真正的 SDK 位置<br /><br />9. sbt package-debug # 編譯套件<br /><br />10. ls target/scala_2.8.1/ # 看看有沒有 foo_2.8.1-0.1.apk，可以用 adb install foo_2.8.1-0.1.apk ， 安裝到 emulator 上去看看 <br /><br />收工<br /><br /><br />參考文章<br /><br /><a href="http://zegoggl.es/2009/12/building-android-apps-in-scala-with-sbt.html">http://zegoggl.es/2009/12/building-android-apps-in-scala-with-sbt.html</a><br /><br />另外還有直接用 ant build 的方式，用標準 andriod 指令建立專案，然後，在 build.xml 裡再 import build-scala.xml 的方式，來編譯 scala 的 andriod 專案，連結 <a href="http://lamp.epfl.ch/~michelou/android/scala-to-android.html">http://lamp.epfl.ch/~michelou/android/scala-to-android.html</a><br /><br />我自己比較喜歡，用 sbt 的方式，總覺得 xml 不是方便有效率的格式<br /><br />另外有興趣，想用 scala 在 android 的專案，寫 testcase 也是用 sbt 的方式，可以參考，墳墓大的 github 範例專案 <a href="https://github.com/brianhsu/ScalaTestAndroidExample">https://github.com/brianhsu/ScalaTestAndroidExample</a><br /><br /><br />PS: <br />1. 用 script/create_project 的話，必須把 create_project 裡面的 val pluginDef = val android = "org.scala-tools.sbt" % "sbt-android-plugin" % "0.5.1"<br /><br />2. 也可以用 <a href="https://github.com/jberkel/android-plugin">https://github.com/jberkel/android-plugin</a> 的版本，只是 project/build/你的project.scala 裡面要自己重定 adbPath，因為 android SDK 2.3 位址換了<br /><br />3. 如果有修改到 android-plugin 的話，記得用 sbt publish-local 安裝，才會裝這一個 local 修改過得版本<br /><br />PS: eclipse 裝在 debian 上時，如果沒有要用 ipv6 可以把改 /etc/sysctl.conf <br /><br />net.ipv6.bindv6only = 0 <br /><br />這樣 eclipse 要 update 的時候，就會用 ipv4
